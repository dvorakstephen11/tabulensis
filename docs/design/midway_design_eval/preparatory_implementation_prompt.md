Please view the attached codebase, the primary documents, and the codebase evaluation report. I want to implement the full robust grid diff algorithm (AMR) and the M-Query diff algorithms, but I also recognize that to do that in one feature branch would be too much to manage. I suspect the better approach would be to have one feature branch that does all the preparatory work that will set up the subsequent feature branch with everything it needs to implement the full robust grid diff algorithm (AMR) and the M-Query diff algorithms. Indeed, the grid diff algorithm(s) and the M-Query diff algorithm(s) may be implemented in separate feature branches, but the preparatory work should pave the way for both. Please write the most detailed possible plan for implementing the preparatory work, based on the findings from the attached evaluation report. 